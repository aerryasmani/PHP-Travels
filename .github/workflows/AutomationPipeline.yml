name: GitHub Actions Pipeline

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  Explore-GitHub-Actions:
    runs-on: ubuntu-latest

    steps:
      - name: Echo triggering event and runner info
        run: |
          echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
          echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
          echo "üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."

      # ... other steps

      - name: List files in the repository
        run: ls ${{ github.workspace }}

      - name: Check job status
        run: echo "üçè This job's status is ${{ job.status }}."

  Check-Site-Availability:
    runs-on: ubuntu-latest
    needs: Explore-GitHub-Actions

    steps:
      - name: Check Site Availability and Content
        id: site_check
        uses: actions/http-client-action@v1
        with:
          args: |
            http -s -I https://phptravels.net -o /dev/null
            response_code=$(echo "$output" | yaml -r '.status_code')
            content_type=$(echo "$output" | yaml -r '.headers.content_type')
            if [ $response_code != 200 ]; then
              echo "::error::Site is down with HTTP status code $response_code"
              exit 1
            else
              echo "Site is up with HTTP status code $response_code"
              echo "Content-Type: $content_type"
              content=$(http -s https://phptravels.net)
              if ! yaml -r ".($content)" | grep -q "Expected Content"; then
                echo "::error::Expected content not found on the page."
                exit 1
              fi
            fi
        env:
          HTTP_HEADERS: |
            User-Agent: MyCustomUserAgent

  # ... other jobs
